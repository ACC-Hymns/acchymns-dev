import{_ as z}from"./chevron-back-outline-WBEKPQRX.js";import{_ as R}from"./chevron-forward-outline-nNwROxiU.js";import{S as _,_ as q}from"./index-CclFhYTF.js";import{u as I}from"./navigator-jDGDBSRB.js";import{d as Y,O as C,r as c,ak as j,p as W,X as G,a as r,b as e,f as b,k as m,g as n,F as w,C as K,E as Q,e as h,al as X,aj as J,i as M,R as Z,t as D,G as tt,am as et,an as at,ao as ot,ap as st,ai as B,aq as nt,ar as lt,as as rt,at as it,o as l,au as ct,_ as ut,l as pt}from"./index-11QSKYHt.js";import{T as S}from"./index-B_2_tYEz.js";import{D as g}from"./index-OnlmNiWb.js";const f="/acchymns-dev/assets/link-outline.svg",dt={key:0,class:"update-section"},mt={key:1,class:"update-book-list-entry more-update"},gt={class:"update-button-layout"},ft={key:1},kt={class:"menu"},vt={class:"title"},yt={class:"settings main-content"},_t=Y({__name:"SettingsHelpView",setup(Ct){const{back:U}=I(),A=C.getPlatform()==="web";let o=c([]),i=c(0),k=c(),v=c();async function F(){(await g.confirm({title:"Clear Cache",message:"Are you sure you want to clear the cache?",okButtonTitle:"Yes",cancelButtonTitle:"No"})).value&&(et(),S.show({text:"Cleared Cache!"}))}async function N(){let a=await at();for(let t of a)t.book_summary=await ot(t.book_short);o.value=a}function O(){i.value>0||(k.value.style.opacity="0.0",v.value.style.opacity="0.0",o.value=[])}async function T(){if(!(i.value>0)){var a=[o.value.length];for(let t=0;t<o.value.length;t++){let s=o.value[t];await st(s,p=>{a[t]=p,i.value=a.reduce((d,H)=>d+H,0)/o.value.length},()=>{i.value=0,o.value=[]})}}}async function $(){(await g.confirm({title:"Clear All Data",message:"Are you sure you want to clear ALL your data? This includes bookmarks and imported books!",okButtonTitle:"Yes",cancelButtonTitle:"No"})).value&&(localStorage.clear(),B.remove({key:"bookSources"}),B.remove({key:"bookOrder"}),nt(),S.show({text:"Cleared All Data!"}))}const L=c(C.getPlatform()),x=j();async function E(){const{uri:a}=await lt.writeFile({path:"logs.txt",data:x.logs,directory:it.Cache,encoding:rt.UTF8});await _.share({url:a})}const P=c(!1);_.canShare().then(a=>P.value=a.value);let u=W("ACCOptions.optOutDataCollection",!1);const{posthog:y}=G();async function V(){if(u.value){u.value=!1,y.opt_in_capturing();return}(await g.confirm({title:"Opt-Out of Data Collection",message:"Are you sure you want to opt-out of data collection?",okButtonTitle:"Yes",cancelButtonTitle:"No"})).value&&(u.value=!0,y.opt_out_capturing())}return(a,t)=>(l(),r(w,null,[e("div",{class:tt({"modal-open":n(o).length>0})},[n(o).length>0?(l(),r("div",dt,[e("div",{class:"background-blur",ref_key:"update_background_element",ref:k},null,512),e("div",{class:"update-panel",ref_key:"update_panel_element",ref:v},[t[6]||(t[6]=e("h2",null,"Hymnal Updates",-1)),t[7]||(t[7]=e("p",null,"Updates found for:",-1)),e("div",null,[(l(!0),r(w,null,K(n(o),(s,p)=>{var d;return l(),r("div",{key:s.book_short},[p<5?(l(),h(ct,{key:0,src:((d=s.book_summary)==null?void 0:d.srcUrl)||"",class:"update-book-list-entry","with-link":!1},null,8,["src"])):p==5?(l(),r("div",mt,[e("h4",null,D(n(o).length-5)+" more...",1)])):m("",!0)])}),128))]),e("div",gt,[e("a",{class:"update-button",onClick:O,style:Q({opacity:n(i)>0?.3:1})},"Later",4),e("a",{class:"update-button-blue",onClick:T},[n(i)>0?(l(),h(X,{key:0,radius:15,progress:n(i)*100,stroke:3,transform:"rotate(-90) translate(-24, 0)"},null,8,["progress"])):(l(),r("span",ft,"Update"))])])],512)])):m("",!0),e("div",kt,[e("div",vt,[e("img",{onClick:t[0]||(t[0]=s=>n(U)()),class:"ionicon title--left",src:z}),t[8]||(t[8]=e("div",{class:"title--center"},[e("h1",null,"Help")],-1))])]),e("div",yt,[t[14]||(t[14]=J('<a href="https://forms.gle/1t7rtUkNaksEUtPEA" class="settings-option" data-v-98ce3ca8><span data-v-98ce3ca8>Request a Book or Feature</span><img class="ionicon" src="'+f+'" data-v-98ce3ca8></a><a href="https://forms.gle/Ezh7d8LFsN5eKdo87" class="settings-option" data-v-98ce3ca8><span data-v-98ce3ca8>Report a Bug</span><img class="ionicon" src="'+f+'" data-v-98ce3ca8></a><a href="https://docs.google.com/document/d/1zWztUrFOr_6ksqDDm4EbQ0jk7trwofaVeeSybcD5PcA" class="settings-option" data-v-98ce3ca8><span data-v-98ce3ca8>Privacy Policy</span><img class="ionicon" src="'+f+'" data-v-98ce3ca8></a>',3)),b(n(Z),{to:"/settings/help/console",class:"settings-option"},{default:M(()=>t[9]||(t[9]=[e("span",null,"Debug Console",-1),e("img",{class:"entrypoint ionicon",src:R},null,-1)])),_:1}),L.value!=="web"?(l(),r("a",{key:0,class:"settings-option",onClick:t[1]||(t[1]=s=>E())},t[10]||(t[10]=[e("span",null,"Export Logs",-1),e("img",{class:"entrypoint ionicon",src:q},null,-1)]))):m("",!0),A?m("",!0):(l(),r("a",{key:1,class:"settings-option",onClick:t[2]||(t[2]=s=>N())},t[11]||(t[11]=[e("span",null,"Force Update Hymnals",-1)]))),e("a",{class:"settings-option",onClick:t[3]||(t[3]=s=>V())},[e("span",null,D(n(u)?"Opt-In to Data Collection":"Opt-Out of Data Collection"),1)]),e("a",{class:"settings-option",onClick:t[4]||(t[4]=s=>F())},t[12]||(t[12]=[e("span",null,"Clear Cache",-1)])),e("a",{class:"settings-option",onClick:t[5]||(t[5]=s=>$())},t[13]||(t[13]=[e("span",null,"Clear All Data",-1)]))])],2),b(ut,{current_page:"settings"})],64))}}),At=pt(_t,[["__scopeId","data-v-98ce3ca8"]]);export{At as default};
