import{d as xe,r as c,O as Se,q as Ne,ap as Be,aw as K,ah as W,a as l,b as o,t as m,g as s,G as _,F as f,C as w,k as n,f as Fe,w as Oe,$ as ze,S as T,D as Te,o as a,E as ue,_ as De}from"./index-CDytosBU.js";import{_ as Ee}from"./chevron-back-outline-WBEKPQRX.js";import{_ as Q}from"./chevron-forward-outline-nNwROxiU.js";import{u as Ae}from"./navigator-BqlJNE25.js";import{U as D,v as Ie,f as re,r as E,h as Ve,e as X,i as Le,j as Re}from"./broadcast-hfs6ho4a.js";const Ue="/acchymns-dev/assets/ellipse.svg",je="/acchymns-dev/assets/backspace.svg",Pe={class:"menu"},Ge={class:"title"},qe={class:"title--center"},Me={key:0,class:"login-container"},He={class:"login-instructions"},Je=["src"],Ke={key:0,class:"ionicon pin-dot",src:Ue},We={class:"keypad"},Qe=["onClick"],Xe={key:0},Ye={key:1},Ze={key:2,class:"backspace"},es={key:3},ss={key:1,class:"main-content"},ts={key:0},ls={class:"center-container"},as={key:0,class:"biblebook space"},os={key:1,class:"biblebook space"},ns={key:2,class:"biblebook space"},is={key:3,class:"biblebook space"},us={class:"book-selector"},rs={key:0,class:"biblebook space"},cs={key:1,class:"biblebook space"},bs={key:2,class:"biblebook space"},ds={key:3,class:"biblebook space"},ks={class:"book-selector"},vs={key:0,class:"biblebook space"},_s={key:1,class:"biblebook space"},ps={key:2,class:"biblebook space"},hs={key:3,class:"biblebook space"},ys={class:"number-selector"},ms={key:0,class:"biblebook space"},fs={key:1,class:"biblebook space"},gs={key:2,class:"biblebook space"},ws={key:3,class:"biblebook space"},Cs={key:4,class:"biblebook space"},$s={key:5,class:"biblebook space"},xs={key:6,class:"biblebook space"},Ss={key:7,class:"biblebook space"},Ns={class:"number-selector"},Bs={key:0,class:"biblebook space"},Fs={key:1,class:"biblebook space"},Os={key:2,class:"biblebook space"},zs={key:3,class:"biblebook space"},Ts={key:4,class:"biblebook space"},Ds={key:5,class:"biblebook space"},Es={key:6,class:"biblebook space"},As={key:7,class:"biblebook space"},Is={key:0},Vs={key:1,class:"number-selector"},Ls={key:0,class:"biblebook space"},Rs={key:1,class:"biblebook space"},Us={key:2,class:"biblebook space"},js={key:3,class:"biblebook space"},Ps={key:4,class:"biblebook space"},Gs={key:5,class:"biblebook space"},qs={key:6,class:"biblebook space"},Ms={key:7,class:"biblebook space"},Hs={key:2},Js={key:3,class:"number-selector"},Ks={key:0,class:"biblebook space"},Ws={key:1,class:"biblebook space"},Qs={key:2,class:"biblebook space"},Xs={key:3,class:"biblebook space"},Ys={key:4,class:"biblebook space"},Zs={key:5,class:"biblebook space"},et={key:6,class:"biblebook space"},st={key:7,class:"biblebook space"},tt={key:1},lt={class:"center-container"},at={key:0,class:"biblebook space"},ot={key:1,class:"biblebook space"},nt=["onClick"],it={key:2,class:"biblebook space"},ut={key:3,class:"biblebook space"},rt={class:"center-container"},ct={class:"verse-list-wide"},bt={class:"verse-list-wide"},dt=["onClick"],kt=["disabled"],vt={key:2,class:"center-container"},_t={style:{"margin-top":"0px"}},pt={class:"settings width-100"},ht={key:0,href:"/broadcast",class:"settings-option"},yt={key:2,class:"lds-ring-container"},xt=xe({__name:"SettingsConnect",setup(mt){const{back:ce}=Ae(),V=c(!1),h=c(""),A=c(D.None);let u=c(Se.getPlatform()),j=c(!1),C=c("LOADING"),L=c(),Y=c([]),x=c(),R=c(0),I=c([]);async function be(i){return await Re.post("https://iahifuumb7zasmzuv5xqpmi7fu0pwtkt.lambda-url.us-east-2.on.aws/",{code:i})}async function de(i){let e=i.data;if(i.status==200){await W.set({key:"broadcasting_auth_token",value:e.token}),A.value=D.Authorized;let t=await re(E());Y.value=Object.values(t),C.value=e.church_id,await P()}else console.log(i.data),setTimeout(()=>{j.value=!1,h.value=""},400)}async function P(){let i=(await Ve(E(),C.value)).Item;L.value&&(L.value.value=i.BG_COLOR.S)}async function ke(){await X(E(),C.value,"","",[-1],"")}async function G(){await W.set({key:"broadcasting_auth_token",value:""}),A.value=D.Unauthorized,h.value="",V.value=!1}function ve(){h.value.length>0&&(h.value=h.value.substring(0,h.value.length-1))}function Z(i){h.value+=i}async function q(){N.value||B.value?(N.value=!1,B.value=!1,await P()):ce()}async function _e(){if(!L.value)return;let i=L.value.value;i==""&&(i="#FFFFFF"),i[0]=="#"&&await Le(E(),C.value,i)}async function pe(i){if(i!=10&&(R.value=i,i==12?ve():i==11?Z(0):Z(i),!(h.value.length>4)&&h.value.length==4)){let e=await be(h.value);V.value=e.status==200,V.value||(j.value=!0),setTimeout(()=>{de(e)},500)}}Ne(async()=>{C.value="...",x.value=await(await fetch("/acchymns-dev/NKJV.bible.json",{})).json()||{version:"",books:[]};let i=await Be();I.value=i.filter(t=>t.status==K.DOWNLOADED||t.status==K.IMPORTED||t.status==K.BUNDLED),console.log(I.value);let e=await W.get({key:"broadcasting_auth_token"});for(let[t,r]of x.value.books.entries())t>38?se.value.push(r):ee.value.push(r);if(te(),U(),e.value!=""&&e.value!=null){let t=await Ie(e.value);if(t.status!=200)return G();let r=t.data;A.value=D.Authorized;let v=await re(E());Y.value=Object.values(v),C.value=r.church_id,await P()}else return G()});async function he(){var t,r,v,$,g,ie;let i="",e="";p.value==1?(i=`${k.value}`,e=`${d.value}:${y.value}-${(v=(r=(t=x.value)==null?void 0:t.books.find(z=>z.name==k.value))==null?void 0:r.chapters.find(z=>z.num==d.value))==null?void 0:v.verses.length}`):p.value==2?(i=`${k.value}`,y.value==S.value?e=`${d.value}:${y.value}`:e=`${d.value}:${y.value}-${S.value}`):(i=`${k.value} `,e=`${d.value}:${y.value}-${(ie=(g=($=x.value)==null?void 0:$.books.find(z=>z.name==k.value))==null?void 0:g.chapters.find(z=>z.num==d.value))==null?void 0:ie.verses.length}, ${O.value}:1-${S.value}`),await X(E(),C.value,i,"BIBLE",[],e)}let N=c(!1),B=c(!1),M=c(0),F=c(""),b=c([]);function ye(i){M.value=i}async function me(){var e;let i=I.value[M.value];if(!i)return i;await X(E(),C.value,F.value,((e=i.name)==null?void 0:e.medium)||"",b.value,i.primaryColor||"#000000")}let ee=c([]),se=c([]),k=c("Genesis"),d=c(1),O=c(1),y=c(1),S=c(1),p=c(1);function te(){d.value>ae(k.value).length&&(d.value=1),O.value>oe(k.value).length&&(O.value=d.value)}function U(){y.value>J(k.value,d.value).length&&(y.value=1),S.value>ne(k.value,p.value==3?O.value:d.value).length&&(S.value=p.value==3?1:y.value),p.value==1&&(S.value=J(k.value,d.value).length)}function le(i){k.value=i.target.innerText,te(),U()}function fe(i){d.value=Number.parseInt(i.target.innerText),U()}function ge(i){O.value=Number.parseInt(i.target.innerText),U()}function we(i){y.value=Number.parseInt(i.target.innerText)}function Ce(i){S.value=Number.parseInt(i.target.innerText)}function H(i,e){p.value=e}function ae(i){var t;return(((t=x.value)==null?void 0:t.books.find(r=>r.name==i))||{chapters:[]}).chapters}function oe(i){var r;let e=((r=x.value)==null?void 0:r.books.find(v=>v.name==i))||{chapters:[]},t=[];if(d.value>0){for(let v=d.value+1;v<=(e==null?void 0:e.chapters.length);v++)t.push(e.chapters[v-1]);return t}return e.chapters}function J(i,e){var v;return((((v=x.value)==null?void 0:v.books.find($=>$.name==i))||{chapters:[]}).chapters.find($=>$.num==e)||{verses:[]}).verses}function ne(i,e){var $;let r=((($=x.value)==null?void 0:$.books.find(g=>g.name==i))||{chapters:[]}).chapters.find(g=>g.num==e)||{verses:[]},v=[];if(y.value>0){for(let g=p.value==3?1:y.value;g<=(r==null?void 0:r.verses.length);g++)v.push(r.verses[g-1]);return v}return r.verses}function $e(){return V.value?"/acchymns-dev/assets/lock-open-outline.svg":"/acchymns-dev/assets/lock-closed-outline.svg"}return(i,e)=>(a(),l(f,null,[o("div",Pe,[o("div",Ge,[o("img",{onClick:e[0]||(e[0]=t=>q()),class:"ionicon title--left",src:Ee}),o("div",qe,[o("h1",null,m(s(N)?"Bible Reading":s(B)?"Song Number":"Broadcast"),1)])])]),A.value==s(D).Unauthorized?(a(),l("div",Me,[o("div",He,[o("img",{class:_(["ionicon",{unlocked:V.value}]),src:$e()},null,10,Je),e[20]||(e[20]=o("p",null,"Please enter 4-digit PIN",-1))]),o("div",{class:_(["pin-input-container",{"pin-input--error":s(j)}])},[(a(),l(f,null,w(4,t=>o("div",{key:t,class:_(h.value.length==t-1?"pin-space-active":"pin-space")},[h.value.length>=t?(a(),l("img",Ke)):n("",!0)],2)),64))],2),o("div",We,[(a(),l(f,null,w(12,t=>o("div",{class:"key",key:t,onClick:r=>pe(t),onAnimationend:e[1]||(e[1]=r=>T(R)?R.value=0:R=0),style:ue({opacity:t==10?0:1})},[t==10?(a(),l("a",Xe)):t==11?(a(),l("a",Ye,e[21]||(e[21]=[o("h4",null,"0",-1)]))):t==12?(a(),l("a",Ze,e[22]||(e[22]=[o("img",{class:"ionicon keyicon",src:je},null,-1)]))):(a(),l("a",es,[o("h4",null,m(t),1)]))],44,Qe)),64))])])):A.value==s(D).Authorized?(a(),l("div",ss,[s(N)?(a(),l("div",ts,[o("div",ls,[e[23]||(e[23]=o("h3",null,"Reading Type",-1)),o("div",{class:_(["book-selector",{"hide-scrollbar":s(u)!=="web"}])},[s(u)!=="web"?(a(),l("a",as)):n("",!0),s(u)!=="web"?(a(),l("a",os)):n("",!0),o("a",{onClick:e[2]||(e[2]=t=>H(t,1)),class:_(["biblebook",{selected:s(p)==1}])},"Start Only",2),o("a",{onClick:e[3]||(e[3]=t=>H(t,2)),class:_(["biblebook",{selected:s(p)==2}])},"Start End",2),o("a",{onClick:e[4]||(e[4]=t=>H(t,3)),class:_(["biblebook",{selected:s(p)==3}])},"Start End Chapter",2),s(u)!=="web"?(a(),l("a",ns)):n("",!0),s(u)!=="web"?(a(),l("a",is)):n("",!0)],2),e[24]||(e[24]=o("h3",null,"Book",-1)),o("div",us,[s(u)!=="web"?(a(),l("a",rs)):n("",!0),s(u)!=="web"?(a(),l("a",cs)):n("",!0),(a(!0),l(f,null,w(s(ee),t=>(a(),l("a",{class:_(["biblebook",{selected:t.name==s(k)}]),onClick:e[5]||(e[5]=r=>le(r)),key:t.name},m(t.name),3))),128)),s(u)!=="web"?(a(),l("a",bs)):n("",!0),s(u)!=="web"?(a(),l("a",ds)):n("",!0)]),o("div",ks,[s(u)!=="web"?(a(),l("a",vs)):n("",!0),s(u)!=="web"?(a(),l("a",_s)):n("",!0),(a(!0),l(f,null,w(s(se),t=>(a(),l("a",{class:_(["biblebook",{selected:t.name==s(k)}]),onClick:e[6]||(e[6]=r=>le(r)),key:t.name},m(t.name),3))),128)),s(u)!=="web"?(a(),l("a",ps)):n("",!0),s(u)!=="web"?(a(),l("a",hs)):n("",!0)]),e[25]||(e[25]=o("h3",null,"Chapter",-1)),o("div",ys,[s(u)!=="web"?(a(),l("a",ms)):n("",!0),s(u)!=="web"?(a(),l("a",fs)):n("",!0),s(u)!=="web"?(a(),l("a",gs)):n("",!0),s(u)!=="web"?(a(),l("a",ws)):n("",!0),(a(!0),l(f,null,w(ae(s(k)),t=>(a(),l("a",{class:_(["biblebook",{selected:t.num==s(d)}]),onClick:e[7]||(e[7]=r=>fe(r)),key:t.num},m(t.num),3))),128)),s(u)!=="web"?(a(),l("a",Cs)):n("",!0),s(u)!=="web"?(a(),l("a",$s)):n("",!0),s(u)!=="web"?(a(),l("a",xs)):n("",!0),s(u)!=="web"?(a(),l("a",Ss)):n("",!0)]),e[26]||(e[26]=o("h3",null,"Start Verse",-1)),o("div",Ns,[s(u)!=="web"?(a(),l("a",Bs)):n("",!0),s(u)!=="web"?(a(),l("a",Fs)):n("",!0),s(u)!=="web"?(a(),l("a",Os)):n("",!0),s(u)!=="web"?(a(),l("a",zs)):n("",!0),(a(!0),l(f,null,w(J(s(k),s(d)),t=>(a(),l("a",{class:_(["biblebook",{selected:t.num==s(y)}]),onClick:e[8]||(e[8]=r=>we(r)),key:t.num},m(t.num),3))),128)),s(u)!=="web"?(a(),l("a",Ts)):n("",!0),s(u)!=="web"?(a(),l("a",Ds)):n("",!0),s(u)!=="web"?(a(),l("a",Es)):n("",!0),s(u)!=="web"?(a(),l("a",As)):n("",!0)]),s(p)==3?(a(),l("h3",Is,"End Chapter")):n("",!0),s(p)==3?(a(),l("div",Vs,[s(u)!=="web"?(a(),l("a",Ls)):n("",!0),s(u)!=="web"?(a(),l("a",Rs)):n("",!0),s(u)!=="web"?(a(),l("a",Us)):n("",!0),s(u)!=="web"?(a(),l("a",js)):n("",!0),(a(!0),l(f,null,w(oe(s(k)),t=>(a(),l("a",{class:_(["biblebook",{selected:t.num==s(O)}]),onClick:e[9]||(e[9]=r=>ge(r)),key:t.num},m(t.num),3))),128)),s(u)!=="web"?(a(),l("a",Ps)):n("",!0),s(u)!=="web"?(a(),l("a",Gs)):n("",!0),s(u)!=="web"?(a(),l("a",qs)):n("",!0),s(u)!=="web"?(a(),l("a",Ms)):n("",!0)])):n("",!0),s(p)>1?(a(),l("h3",Hs,"End Verse")):n("",!0),s(p)>1?(a(),l("div",Js,[s(u)!=="web"?(a(),l("a",Ks)):n("",!0),s(u)!=="web"?(a(),l("a",Ws)):n("",!0),s(u)!=="web"?(a(),l("a",Qs)):n("",!0),s(u)!=="web"?(a(),l("a",Xs)):n("",!0),(a(!0),l(f,null,w(ne(s(k),s(p)==3?s(O):s(d)),t=>(a(),l("a",{class:_(["biblebook",{selected:t.num==s(S)}]),onClick:e[10]||(e[10]=r=>Ce(r)),key:t.num},m(t.num),3))),128)),s(u)!=="web"?(a(),l("a",Ys)):n("",!0),s(u)!=="web"?(a(),l("a",Zs)):n("",!0),s(u)!=="web"?(a(),l("a",et)):n("",!0),s(u)!=="web"?(a(),l("a",st)):n("",!0)])):n("",!0),o("div",null,[o("button",{class:"send-button",onClick:e[11]||(e[11]=t=>he())},"Send")]),o("button",{class:"settings-button",onClick:e[12]||(e[12]=t=>q())},"Back")])])):s(B)?(a(),l("div",tt,[o("div",lt,[e[30]||(e[30]=o("h3",null,"Hymnal",-1)),o("div",{class:_(["book-selector",{"hide-scrollbar":s(u)!=="web"}])},[s(u)!=="web"?(a(),l("a",at)):n("",!0),s(u)!=="web"?(a(),l("a",ot)):n("",!0),(a(!0),l(f,null,w(s(I).length,t=>{var r;return a(),l("a",{key:t,onClick:v=>ye(t-1),class:_(["biblebook",{selected:s(M)==t-1}]),style:ue({"background-color":s(I)[t-1].primaryColor})},m((r=s(I)[t-1].name)==null?void 0:r.medium),15,nt)}),128)),s(u)!=="web"?(a(),l("a",it)):n("",!0),s(u)!=="web"?(a(),l("a",ut)):n("",!0)],2),o("div",rt,[e[27]||(e[27]=o("h3",null,"Song Number",-1)),Oe(o("input",{type:"text",pattern:"\\d*",maxlength:"3",class:"number-input-bar","onUpdate:modelValue":e[13]||(e[13]=t=>T(F)?F.value=t:F=t),name:"song",placeholder:"#"},null,512),[[ze,s(F)]])]),e[31]||(e[31]=o("h3",null,"Verses",-1)),o("div",ct,[e[28]||(e[28]=o("div",null,null,-1)),o("a",{class:_(["verse",{"verse-selected":s(b)[0]==-2}]),onClick:e[14]||(e[14]=t=>{if(s(b)[0]==-2){T(b)?b.value=[]:b=[];return}else T(b)?b.value=[]:b=[],s(b).push(-2)})}," All ",2),e[29]||(e[29]=o("div",null,null,-1))]),o("div",bt,[(a(),l(f,null,w(12,t=>o("a",{key:t,class:_(["verse",{"verse-selected":s(b).includes(t)}]),onClick:r=>{s(b)[0]==-2&&(T(b)?b.value=[]:b=[]),s(b).includes(t)?s(b).splice(s(b).indexOf(t),1):s(b).push(t)}},m(t),11,dt)),64))]),o("div",null,[o("button",{class:"send-button",disabled:s(F).length==0||Number(s(F))==0,onClick:e[15]||(e[15]=t=>me())}," Send ",8,kt)]),o("button",{class:"settings-button",onClick:e[16]||(e[16]=t=>q())},"Back")])])):A.value==s(D).Authorized?(a(),l("div",vt,[e[38]||(e[38]=o("h1",{style:{"margin-bottom":"0px"}},"Authorized",-1)),o("h3",_t,"as "+m(s(C)),1),o("div",pt,[s(u)=="web"?(a(),l("a",ht,e[32]||(e[32]=[o("span",null,"Open Output Display",-1),o("img",{class:"entrypoint ionicon",src:Q},null,-1)]))):n("",!0),o("a",{onClick:e[17]||(e[17]=t=>T(B)?B.value=!0:B=!0),class:"settings-option"},e[33]||(e[33]=[o("span",null,"Set Song Number",-1),o("img",{class:"entrypoint ionicon",src:Q},null,-1)])),o("a",{onClick:e[18]||(e[18]=t=>T(N)?N.value=!0:N=!0),class:"settings-option"},e[34]||(e[34]=[o("span",null,"Set Bible Reading",-1),o("img",{class:"entrypoint ionicon",src:Q},null,-1)])),o("a",{onClick:e[19]||(e[19]=t=>_e()),class:"settings-option"},[o("span",null,[e[35]||(e[35]=Te(" Set Background Color ")),o("input",{ref_key:"hexinput",ref:L,class:"hexinput",type:"text",placeholder:"#FFFFFF"},null,512)])]),o("a",{onClick:ke,class:"settings-option"},e[36]||(e[36]=[o("span",null,"Clear Screen",-1)])),o("a",{onClick:G,class:"settings-option"},e[37]||(e[37]=[o("span",null,"Log Out",-1)]))])])):n("",!0),Fe(De,{current_page:"settings"})])):(a(),l("div",yt,e[39]||(e[39]=[o("div",{class:"lds-ring"},[o("div"),o("div"),o("div"),o("div")],-1)])))],64))}});export{xt as default};
